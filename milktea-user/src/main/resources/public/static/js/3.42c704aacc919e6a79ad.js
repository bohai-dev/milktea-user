webpackJsonp([3],{"3hIj":function(t,e){},NDeJ:function(t,e){},zKIK:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("mvHQ"),i=s.n(o),a=s("gHqA"),n=s("bjBg"),l=s("Y52p"),c=s("YxJB"),r=s("3Lt7"),d=s("pFYg"),u=s.n(d),h=(Boolean,Boolean,String,String,Object,Array,Boolean,Boolean,{name:"actionsheet",mounted:function(){var t=this;this.hasHeaderSlot=!!this.$slots.header,this.$nextTick(function(){t.$tabbar=document.querySelector(".weui-tabbar"),t.$refs.iOSMenu&&t.$refs.iOSMenu.addEventListener("transitionend",t.onTransitionEnd)})},props:{value:Boolean,showCancel:Boolean,cancelText:String,theme:{type:String,default:"ios"},menus:{type:[Object,Array],default:function(){return{}}},closeOnClickingMask:{type:Boolean,default:!0},closeOnClickingMenu:{type:Boolean,default:!0}},data:function(){return{hasHeaderSlot:!1,show:!1}},methods:{onTransitionEnd:function(){this.$emit(this.show?"on-after-show":"on-after-hide")},onMenuClick:function(t,e){"string"==typeof t?this.emitEvent("on-click-menu",e,t):"disabled"!==t.type&&"info"!==t.type&&(t.value||0===t.value?this.emitEvent("on-click-menu",t.value,t):(this.emitEvent("on-click-menu","",t),this.show=!1))},onClickingMask:function(){this.$emit("on-click-mask"),this.closeOnClickingMask&&(this.show=!1)},emitEvent:function(t,e,s){if("on-click-menu"===t&&!/.noop/.test(e)){var o=s;"object"===(void 0===o?"undefined":u()(o))&&(o=JSON.parse(i()(o))),this.$emit(t,e,o),this.$emit(t+"-"+e),this.closeOnClickingMenu&&(this.show=!1)}},fixIos:function(t){this.$el.parentNode&&-1!==this.$el.parentNode.className.indexOf("v-transfer-dom")||this.$tabbar&&/iphone/i.test(navigator.userAgent)&&(this.$tabbar.style.zIndex=t)}},watch:{show:function(t){var e=this;this.$emit("input",t),t?this.fixIos(-1):setTimeout(function(){e.fixIos(100)},200)},value:{handler:function(t){this.show=t},immediate:!0}},beforeDestroy:function(){this.fixIos(100),this.$refs.iOSMenu&&this.$refs.iOSMenu.removeEventListener("transitionend",this.onTransitionEnd)}}),g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vux-actionsheet"},[s("transition",{attrs:{name:"vux-actionsheet-mask"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-mask weui-mask_transparent",on:{click:t.onClickingMask}})]),t._v(" "),"android"===t.theme?s("div",{staticClass:"weui-skin_android"},[s("transition",{attrs:{name:"vux-android-actionsheet"},on:{"after-enter":function(e){t.$emit("on-after-show")},"after-leave":function(e){t.$emit("on-after-hide")}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-actionsheet"},[s("div",{staticClass:"weui-actionsheet__menu"},t._l(t.menus,function(e,o){return s("div",{staticClass:"weui-actionsheet__cell",domProps:{innerHTML:t._s(e.label||e)},on:{click:function(s){t.onMenuClick(e,o)}}})}))])])],1):s("div",{ref:"iOSMenu",staticClass:"weui-actionsheet",class:{"weui-actionsheet_toggle":t.show}},[s("div",{staticClass:"weui-actionsheet__menu"},[t.hasHeaderSlot?s("div",{staticClass:"weui-actionsheet__cell"},[t._t("header")],2):t._e(),t._v(" "),t._l(t.menus,function(e,o){return s("div",{staticClass:"weui-actionsheet__cell",class:"vux-actionsheet-menu-"+(e.type||"default"),domProps:{innerHTML:t._s(e.label||e)},on:{click:function(s){t.onMenuClick(e,o)}}})})],2),t._v(" "),t.showCancel?s("div",{staticClass:"weui-actionsheet__action",on:{click:function(e){t.emitEvent("on-click-menu","cancel")}}},[s("div",{staticClass:"weui-actionsheet__cell"},[t._v(t._s(t.cancelText||"取消"))])]):t._e()])],1)},staticRenderFns:[]};var m=s("VU/8")(h,g,!1,function(t){s("3hIj")},null,null).exports,f=s("fBcm"),v=s("b+jt");new a.a;l.a,c.a,r.a,f.a,v.a;var p=new a.a;var _={name:"home",data:function(){return{showHideOnBlur:!1,dialogGoodsDetCont:{dgdUrl:"",dgdCont:""},dgdUrl:"../../../static/images/home/local_position2.png",home:"home",localLang:"zh",localAddr:{localPos:"../../../static/images/home/local_position2.png",localName:""},isShowAs:!1,isShowAs2:!1,testUrl:!1,menusAddr:{},menusStore:[],detailFSsrc:"../../../static/images/home/fire_icon.png",banner:[],topFire_src:[{src:"../../../static/images/home/tf_zhaopai3.png",title:this.$t("home.topFire_src.title_djjx"),linkTo:"/classification",indexNo:"1"},{src:"../../../static/images/home/tf_dianzhang.png",title:this.$t("home.topFire_src.title_zpty"),linkTo:"/classification",indexNo:"2"},{src:"../../../static/images/home/tf_yuding.png",title:this.$t("home.topFire_src.title_ydxd"),linkTo:"/classification",indexNo:0,isOrder:"isOrder"}],detailFireSrc:[]}},mounted:function(){this.shopCar=new n.a(this.$store),this.initLocalLang(),this.initOpenId(),this.initGetStoreId()},methods:{initOpenId:function(){var t=this,e=function(t,e){var s=t.split("?"),o="";if(s[0]==t)return o;var i=s[1];s=i.split("&");for(var a=0;a<s.length;a++){var n=(i=s[a]).split("=");n.length<=1||n[0]==e&&(o=n[1])}return o}(location.href.split("#")[0],"code"),s=p.getItem("telUserNo").toJson();e&&p.setItem("wxCode",e),s||(e?this.$http.get("/userLogin/weixin",{params:{code:e,accessToken:p.getItem("accessToken").toString(),openId:p.getItem("weixinOpenid").toString()}}).then(function(e){if(console.log("/userLogin/weixin"),console.log(e),200==e.status)if(e.data.data&&"00000"==e.data.rspCode){var s=e.data.data.weixinOpenid,o=e.data.data.accessToken;p.setItem("weixinOpenid",s),p.setItem("accessToken",o),p.setItem("wxUserInfo",i()(e.data.data)),t.findUserByWeixinOpenid()}else{if("en"==p.getItem("localLang").toString())var a=e.data.usErrorMsg;else a=e.data.cnErrorMsg;t.$vux.toast.show({text:a,type:"text"})}}).catch(function(t){console.log(t)}):console.log("no-code"))},findUserByWeixinOpenid:function(){this.$http.get("/userRegister/findUserByWeixinOpenid",{params:{weixinOpenid:p.getItem("weixinOpenid").toString()}}).then(function(t){if(200==t.status&&"00000"==t.data.rspCode){if(console.log("根据手机号码查找用户,确定用户已经存在了，存储userNo,telephone"),console.log(t.data.data),t.data.data&&t.data.data.telephone&&t.data.data.userNo){var e={telephone:t.data.data.telephone,userNo:t.data.data.userNo,weixinOpenid:t.data.data.weixinOpenid};p.setItem("telUserNo",e)}t.data.data&&t.data.data.userNo&&p.setItem("userNo",t.data.data.userNo)}}).catch(function(t){console.log(t)})},initLocalLang:function(){p.getItem("localLang").toString()?this.localLang="en"==p.getItem("localLang").toString()?"中":"EN":(this.localLang="EN",p.setItem("localLang","zh"))},initGetCarousel:function(){var t=this;this.$http.get("/userLogin/getCarouselFigure",{params:{storeNo:p.getItem("storeNo").toString(),lang:"zh"}}).then(function(e){200==e.status&&"00000"==e.data.rspCode&&(t.banner=e.data.data.data)}).catch(function(t){console.log(t)})},initGetStoreId:function(){var t=this,e=this;this.$http.get("/userLogin/storelist",{params:{lang:p.getItem("localLang").toString()}}).then(function(s){console.log("storelist"),console.log(s.data),200==s.status&&"00000"==s.data.rspCode&&(p.getItem("storeNo").toString()?s.data.data.data.forEach(function(t,s){t.storeNo==p.getItem("storeNo").toString()&&(e.localAddr.localName=t.storeName)}):s.data.data.data.forEach(function(t,s){t.isDefault&&(p.setItem("storeNo",t.storeNo),e.localAddr.localName=t.storeName)}),t.menusStore=s.data.data.data,s.data.data.data.forEach(function(t,s){e.menusAddr["storeName_"+t.storeNo]=t.storeName}),p.setItem("storeList",i()(s.data.data.data)),t.initStoreData(),t.initGetCarousel())}).catch(function(t){console.log(t)})},selectAddr:function(){this.isShowAs2=!this.isShowAs2},selectMenu:function(t,e){if(console.log(t),"cancel"!=t){var s=t.split("_");s[1]!=p.getItem("storeNo").toString()&&(p.setItem("storeNo",s[1]),this.localAddr.localName=e,this.shopCar.removeAll(),window.location.reload())}},selectMenu2:function(t,e){console.log(t);var s=t.storeNo;s!=p.getItem("storeNo").toString()&&(p.setItem("storeNo",s),this.localAddr.localName=e,this.shopCar.removeAll(),window.location.reload())},initStoreData:function(){var t=this;this.$http.get("/userLogin/getClassGoods",{params:{storeNo:p.getItem("storeNo").toString(),classType:1,lang:p.getItem("localLang").toString()}}).then(function(e){console.log("/userLogin/getClassGoods"),console.log(e),console.log(e.data.data.data),200==e.status&&"00000"==e.data.rspCode&&(t.detailFireSrc=e.data.data.data)}).catch(function(t){console.log(t)})},changeLang:function(t){console.log(t),"中"==t?(this.localLang="EN",p.setItem("localLang","zh")):(this.localLang="中",p.setItem("localLang","en")),this.shopCar.removeAll(),window.location.reload()},selectThisGoods:function(t){console.log(t),p.setItem("selectThisGoods",i()(t)),this.$router.openPage("/classification")},seeThisGoods:function(t){this.showHideOnBlur=!0,console.log("dgdUrl"),console.log(t),this.dialogGoodsDetCont={dgdUrl:t.goodsPictureBig,dgdCont:t.goodsIntroduction}},open:function(t,e,s){console.log(t),console.log(e),e&&p.setItem("judeFromHome",{indexNo:e}),"isOrder"==s?p.setItem("isOrder","isOrder"):p.setItem("isOrder","noOrder"),p.setItem("selectThisGoods",i()({})),this.$router.openPage(t)}},components:{XImg:l.a,Flexbox:c.a,FlexboxItem:r.a,Actionsheet:m,Swiper:f.a,SwiperItem:v.a}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-init"},[s("swiper",{attrs:{loop:"",auto:"",interval:4e3,height:"4rem","show-dots":!0,"dots-position":"center"}},t._l(t.banner,function(t,e){return s("swiper-item",{key:e,staticClass:"swiper-demo-img"},[s("img",{attrs:{src:t.figureAddress}})])})),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.detailFireSrc.length,expression:"detailFireSrc.length"}],staticClass:"topFire_cont"},[t._l(t.topFire_src,function(e){return s("div",{staticClass:"tf_cell"},[s("section",{on:{click:function(s){t.open(e.linkTo,e.indexNo,e.isOrder)}}},[s("x-img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.src,expression:"tf_src.src"}],staticClass:"tf_img",attrs:{"web-src":e.src+"?type=webp"}}),t._v(" "),s("div",{staticClass:"tf_title"},[t._v(t._s(e.title))])],1)])}),t._v(" "),s("div",{staticClass:"localLang",on:{click:function(e){t.changeLang(t.localLang)}}},[t._v("\n\t\t\t"+t._s(t.localLang)+"\n\t\t")]),t._v(" "),s("div",{staticClass:"localAddr"},[s("div",{staticClass:"addrCont",on:{click:t.selectAddr}},[s("x-img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.localAddr.localPos,expression:"localAddr.localPos"}],staticClass:"localPos"}),t._v(" "),s("div",[t._v(t._s(t.localAddr.localName))]),t._v(" "),t._m(0)],1),t._v(" "),t.isShowAs2?s("div",{staticClass:"storeDetail"},t._l(t.menusStore,function(e,o){return s("div",{staticClass:"sd-item",on:{click:function(s){t.selectMenu2(e)}}},[s("span",{class:{colorYellow:t.localAddr.localName==e.storeName}},[t._v(t._s(e.storeName))])])})):t._e()])],2),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.detailFireSrc.length,expression:"detailFireSrc.length"}],staticClass:"bodyCont scroll-box-y"},[s("div",{staticClass:"detailFire_cont"},t._l(t.detailFireSrc,function(e,o){return s("div",{staticClass:"df_cell"},[s("div",{staticClass:"df_header"},[s("x-img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.classLogo,expression:"detailFS.classLogo"}],staticClass:"dfh_img"}),t._v(" "),s("p",{staticClass:"dfh_title"},[t._v(t._s(e.className)+" ——")])],1),t._v(" "),s("div",{staticClass:"df_body"},t._l(e.goods,function(e){return s("div",{staticClass:"dfb_item"},[s("x-img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.goodsPictureRound,expression:"dfb_body.goodsPictureRound"}],staticClass:"dfb_img",nativeOn:{click:function(s){t.seeThisGoods(e)}}}),t._v(" "),s("p",{staticClass:"dfb_name"},[t._v(t._s(e.goodsName))]),t._v(" "),s("p",{staticClass:"dfb_price"},[t._v("$ "+t._s(e.goodsPrice))]),t._v(" "),s("x-button",{staticClass:"dfb_buy",attrs:{mini:""},nativeOn:{click:function(s){t.selectThisGoods(e)}}},[t._v("购买")])],1)}))])}))]),t._v(" "),s("actionsheet",{attrs:{menus:t.menusAddr,"show-cancel":""},on:{"on-click-menu":t.selectMenu},model:{value:t.isShowAs,callback:function(e){t.isShowAs=e},expression:"isShowAs"}}),t._v(" "),s("div",{staticClass:"dialogGoodsDet"},[s("x-dialog",{staticClass:"dialog-demo",attrs:{"hide-on-blur":"","dialog-style":{width:"80%","max-width":"650px",overflow:"visible"}},model:{value:t.showHideOnBlur,callback:function(e){t.showHideOnBlur=e},expression:"showHideOnBlur"}},[s("div",{staticClass:"img-box"},[s("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.dialogGoodsDetCont.dgdUrl}}),t._v(" "),t.dialogGoodsDetCont.dgdCont?s("div",{staticClass:"dgdCont"},[t._v("\n\t          \t"+t._s(t.dialogGoodsDetCont.dgdCont)+"\n\t          ")]):t._e()])])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"triangle_border_down"},[e("span")])}]};var C=s("VU/8")(_,w,!1,function(t){s("NDeJ")},"data-v-6e3b18b4",null);e.default=C.exports}});
//# sourceMappingURL=3.42c704aacc919e6a79ad.js.map